#!/bin/bash

menu(){
  echo " "
  echo "Manas: an opinionated setup for Debian Mate"
  echo " "
  echo "Usage: manas COMMAND [APP NAME] "
  echo " "
  echo "Commands:"
  echo "install-all    Installs all apps and settings."
  echo "uninstall-all  Uninstalls all apps and settings."
  echo "update-apps    Update apps without a repo"
  echo "install        Install individual app. Takes app name as argument"
  echo "uninstall      Uninstall individual app. Takes app name as argument."
  echo "update         Update individual app. Takes app name as argument."
  echo " "
}

install-all(){
  bash run-commands/install-all.sh
}

uninstall-all(){
  bash run-commands/uninstall-all.sh
}

# update apps without a repository
update-apps(){
  bash audio-video/freetube/update.sh
  bash accessories/localsend/update.sh
  bash graphics/drawio/update.sh
  bash audio-video/ytdownloader/update.sh
  bash office/marktext/update.sh
  bash development/dbgate/update.sh
  bash accessories/ulauncher/update.sh
}

# show menu if there's no arguments
if [ $# -eq 0 ]; then menu; fi

# commands with one argument
if [ $# -eq 1 ]; then
  if [ "$1" = "install-all" ]; then install-all; fi
  if [ "$1" = "uninstall-all" ]; then uninstall-all; fi
  if [ "$1" = "update-apps" ]; then update-apps 2> /tmp/manas.log ; fi
fi

# commands with two arguments (install, uninstall, update)
if [ $# -eq 2 ]; then
  if [ -d accessories/$2 ]; then bash accessories/$2/$1.sh; fi
  if [ -d audio-video/$2 ]; then bash audio-video/$2/$1.sh; fi
  if [ -d databases/$2 ]; then bash databases/$2/$1.sh; fi
  if [ -d development/$2 ]; then bash development/$2/$1.sh; fi
  if [ -d graphics/$2 ]; then bash graphics/$2/$1.sh; fi
  if [ -d office/$2 ]; then bash office/$2/$1.sh; fi
  if [ -d programming-languages/$2 ]; then bash programming-languages/$2/$1.sh; fi
  if [ -d system/$2 ]; then bash system/$2/$1.sh; fi
  if [ -d web-browsers/$2 ]; then bash web-browsers/$2/$1.sh; fi
fi
